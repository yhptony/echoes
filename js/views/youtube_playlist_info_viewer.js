define(["jquery","underscore","backbone","views/youtube_item","models/youtube_item","models/youtube_playlist_info_provider","text!templates/youtube_playlist_info_viewer.html"],function(e,t,n,r,i,s,o){var u=n.Collection.extend({model:i}),a=n.View.extend({tagName:"ul",className:"clearfix unstyled ux-maker playlist-items",view:{type:r,collection:u}}),f=n.View.extend({template:o,render:function(){this.$el.html(t.template(this.template,this.model.toJSON()))}}),l=n.View.extend({tagName:"div",transition:{duration:200,css:"transition-in"},initialize:function(){this.info=new s,this.infoView=new f({model:this.info}),this.items=new a,this.$el.append([this.infoView.el,this.items.el]),this.listenTo(this.model.youtube(),"change:showPlaylistId",this.getPlaylistInfo),this.listenTo(n,"app:load-more",this.handleLoadMore),this.listenTo(this.info,"done",this.renderItems),n.trigger("app:show-loader"),this.getPlaylistInfo()},getPlaylistInfo:function(){this.info.set("id",this.model.youtube().get("showPlaylistId"))},renderItems:function(e){n.trigger("app:hide-loader"),this.items.collection.set(t.chain(e).filter(function(e){var t=e&&e.video&&e.video.status&&e.video.status;return t&&t.value==="restricted"||t&&t.value==="rejected"?!1:e&&e.video}).map(function(e){return e.video}).value()),this.infoView.render()}});return l});